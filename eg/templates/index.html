{%extends 'base.html'%}
{% load static%}

{% block content %}
{% load socialaccount %}

<html>
  <head>
    <title>Google Registration</title>
  </head>
  <body>
  <h1>Exercise Gamification</h1>
  <br></br>
  <br></br>
  {% if user.is_authenticated %}
  <h3>Welcome {{ user.first_name }}</h3>
  <br></br>

  <p> Would you like to make a <a href="/forum_post"> post?</a></p>
  <p> Input  <a href="/exercise"> exercises </a></p>
  <p> View <a href="/progress/{{user.id}}"> progress</a></p>
  <p> Visit <a href="/forum/"> Forums </a></p>

  <div class="card mb-3">
    <div class = "row no-gutters">
      <div class = "col-md-2">
        {%if user.profile.profile_pic.url%}
        <img class="card-img-top" src="{{request.user.profile.profile_pic.url}}" class = "rounded-circle" alt="Card image cap">
        {% else %}
        <img class="card-img-top" src="{% static '/exgame/images/default_image.png' %}" class = "rounded-circle" alt="Card image cap">
        {%endif%}
        </div>
        <div class= "col-md-10">
          <div class="card-body">
            <h5 class="card-title">{{user.username}}</h5>
              <p class="card-text">{{user.profile.bio}}</p>
              <p class="card-text"><small class = "text-muted"> Joined {{user.date_joined}}</small></p>

              {% if user.profile.id %}
              
              <a href="{% url 'show_profile_page' user.profile.id %} " class="btn btn-primary">Visit Profile</a> 
              
              {%else%}
              <a href="{% url 'create_profile_page'%} " class="btn btn-primary">Create Profile</a> 

              {% endif %}
              <!-- ^^^In the future this should take you to their public facing profile page -->
              </div>
              </div>
    </div>
  </div>

 
  {% else %}
  <link rel="stylesheet" type ="text/css" href="{% static 'style.css' %}" class = "center">
  <a href="{% provider_login_url 'google' %}">Login with Google</a>
  {% endif %}

  </body>
</html>
{% endblock %}